<% layout('layout/boilerplate.ejs') %>

<% if (products.length === 0) { %>
    <div class="container comparison-container">
        <div class="comparison-header">
            <h1><i class="fas fa-balance-scale"></i> Compare Products</h1>
        </div>
        <div class="alert alert-info text-center" role="alert">
            <h4>No Products Available</h4>
            <p>You haven't added any products yet. Add some products to compare their environmental impact.</p>
            <a href="/form" class="btn btn-primary">Add Product</a>
        </div>
    </div>
<% } else { %>

<form action="/comparison" method="POST" class="comparison-container">
    <div class="comparison-header">
        <h1><i class="fas fa-balance-scale"></i> Compare Products</h1>
        <p class="text-white opacity-50">Select products from your inventory to compare their environmental impact</p>
    </div>

    <div class="product-selection">
        <div class="product-column">
            <h3>Product 1</h3>
            <ul class="product-list">
                <% for(let product of products){ %>
                    <li class="product-item">
                        <input type="radio" name="product1" value="<%= product._id %>" id="product1-<%= product._id %>" hidden>
                        <label for="product1-<%= product._id %>" class="product-label">
                            <div class="product-name"><%= product.name %></div>
                            <div class="product-details">
                                <% if(product.category) { %>
                                    <span><i class="fas fa-tag"></i> <%= product.category %></span>
                                <% } %>
                                <% if(product.price) { %>
                                    <span><i class="fas fa-dollar-sign"></i> <%= product.price %></span>
                                <% } %>
                            </div>
                        </label>
                    </li>
                <% } %>
            </ul>
        </div>

        <div class="product-column">
            <h3>Product 2</h3>
            <ul class="product-list">
                <% for(let product of products){ %>
                    <li class="product-item">
                        <input type="radio" name="product2" value="<%= product._id %>" id="product2-<%= product._id %>" hidden>
                        <label for="product2-<%= product._id %>" class="product-label">
                            <div class="product-name"><%= product.name %></div>
                            <div class="product-details">
                                <% if(product.category) { %>
                                    <span><i class="fas fa-tag"></i> <%= product.category %></span>
                                <% } %>
                                <% if(product.price) { %>
                                    <span><i class="fas fa-dollar-sign"></i> <%= product.price %></span>
                                <% } %>
                            </div>
                        </label>
                    </li>
                <% } %>
            </ul>
        </div>
    </div>

    <div class="compare-button-container">
        <button class="btn-compare" id="compareBtn" disabled type="submit">
            <i class="fas fa-chart-line"></i> Compare Selected Products
        </button>
    </div>
</form>

<% } %>
