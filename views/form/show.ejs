<% layout('layout/boilerplate.ejs') %>

<div class="show-container">
    <div class="show-card">
        <div class="show-header">
            <h1 class="show-title"><i class="fas fa-leaf me-3"></i><%= product.name %></h1>
            <p class="show-subtitle">Created on <%= product.createdAt.toDateString() %></p>
        </div>
        <div class="show-body">
            <div class="show-row">
                <div class="show-section">
                    <h4><i class="fas fa-info-circle me-2"></i>Product Details</h4>
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item"><strong>Brand:</strong> <%= product.brand || 'N/A' %></li>
                        <li class="list-group-item"><strong>Category:</strong> <%= product.category %></li>
                        <li class="list-group-item"><strong>Material:</strong> <%= product.material %></li>
                        <li class="list-group-item"><strong>Weight:</strong> <%= product.weight ? product.weight + ' kg' : 'N/A' %></li>
                        <li class="list-group-item"><strong>Origin Country:</strong> <%= product.originCountry || 'Unknown' %></li>
                    </ul>
                </div>

                <div class="show-section">
                    <h4><i class="fas fa-seedling me-2"></i>Environmental Impact</h4>
                    <% if (product.impactAnalysis) { %>
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item"><strong>Carbon Footprint:</strong> <%= product.impactAnalysis.carbonFootprint %> kg CO₂</li>
                            <li class="list-group-item"><strong>Water Usage:</strong> <%= product.impactAnalysis.waterUsage %> liters</li>
                            <li class="list-group-item"><strong>Recyclability:</strong> <%= product.impactAnalysis.recyclability %></li>
                            <li class="list-group-item"><strong>Sustainability Score:</strong> <%= product.impactAnalysis.sustainabilityScore %> / 10</li>
                            <% if (product.impactAnalysis.aiExplanation) { %>
                                <li class="list-group-item"><strong>AI Explanation:</strong> <%= product.impactAnalysis.aiExplanation %></li>
                            <% } %>
                        </ul>
                    <% } else { %>
                        <p class="text-warning">No impact analysis available.</p>
                    <% } %>
                </div>
            </div>

            <div class="show-actions">
                <a href="/form/all-products" class="btn btn-outline-secondary">← Back to All Products</a>
                <a href="/form/edit/<%= product._id %>" class="btn btn-outline-warning">Edit Product</a>
                <form action="/form/delete-product/<%= product._id %>?_method=DELETE" method="POST" class="d-inline">
                    <button type="submit" class="btn btn-danger" 
                        onclick="return confirm('Are you sure you want to delete this product?')">
                        <i class="fas fa-trash me-2"></i>Delete
                    </button>
                </form>
            </div>
      </div>
    </div>
  </div>